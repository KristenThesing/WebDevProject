<html>
    <head>
        <title>DealBreaker | Profile</title>

        <!-- Favicons, generated by Favicon.io -->
        <link rel="apple-touch-icon" sizes="180x180" href="res/favicons/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="res/favicons/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="res/favicons/favicon-16x16.png">
        <link rel="stylesheet"  href="profilestyle.css">
        <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
        
        <!-- Bootstrap core CSS -->
        <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

        <!-- Custom styles -->
        <link href="css/general.css" rel="stylesheet">
        <link href="css/materialize.min.css" rel="stylesheet">
    </head>

<body>
<!-- Navigation Bar-->
<nav class="navbar fixed-top navbar-expand-lg navbar-light bg-white fixed-top">
        <div class="container">
            <a class="navbar-brand" href="index.html"><img src="res/logo.png" alt="DealBreaker Logo" id="banner"></a>
            <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarResponsive">
                <ul class="navbar-nav ml-auto">
                    <li class="logged-in" style="display: none">
                        <a class="nav-link" href="browse.html">Browse</a>
                    </li>
                    <li class="logged-in" style="display: none">
                        <a class="nav-link" href="profile.html">My Profile</a>
                    </li>
                    <li class="logged-in" style="display: none">
                        <a class="nav-link" href="editprofile.html">Edit Profile</a>
                    </li>
                    <li class="logged-in" style="display: none">
                        <a class="nav-link" href="subscription.html">Upgrade to Premium</a>
                    </li>
                    <li class="logged-in" style="display: none">
                        <a class="nav-link" href="#" id="logout">Logout</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="profile-card">
        <div class="image-container">
            <img id="profile-picture" style="width:100%">
        </div>
        <div class="main-container">
            <div class="title">
                <h2 id="displayName"></h2>
            </div>
            <p><i class="fa fa-home info"></i><span id="displayCityState"></span></p>
            <p><i class="fa fa-envelope info"></i><span id="displayEmail"></span></p>
            <p><i class="fa fa-birthday-cake info"></i><span id="displayAge"></span></p>
            <hr>
            <p><b><i class="fa fa-heart info"></i>Deal Breakers</b></p>
            <div class="dealbreaker">
                <p id="dealbreaker-one"></p>
            </div>
            <hr>
            <div class="dealbreaker">
                <p id="dealbreaker-two"></p>
            </div>
            <hr>
            <div class="dealbreaker">
                <p id="dealbreaker-three"></p>
            </div>
        </div>


    </div>
</body>

<!-- Scripts for Firebase app features -->
<script src="https://www.gstatic.com/firebasejs/5.9.3/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/5.9.3/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/5.9.3/firebase-firestore.js"></script>
<script src="https://www.gstatic.com/firebasejs/5.6.0/firebase-functions.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.1.0/firebase-database.js"></script>
<script src="https://www.gstatic.com/firebasejs/5.9.3/firebase-storage.js"></script>

<script>
    // Initialize Firebase
    var config = {
        apiKey: "AIzaSyC-eG4Sn1gAbnYDdSn_kObzVTGTsfH09lk",
        authDomain: "dealbreaker-dating.firebaseapp.com",
        databaseURL: "https://dealbreaker-dating.firebaseio.com",
        storageBucket: "dealbreaker-dating.appspot.com",
        projectId: "dealbreaker-dating",
    };
    
    firebase.initializeApp(config);

    //Make auth and firestore references
    const auth = firebase.auth();
    const db = firebase.firestore();
    const functions = firebase.functions();
    const storage = firebase.storage();
    const storageRef = storage.ref();
        
    firebase.auth().onAuthStateChanged(function(user) {
        if (user) {
            var user = firebase.auth().currentUser;

            var gsReference = storageRef.child(user.uid + '/profilePicture/profile');
            gsReference.getDownloadURL().then(function(url) {
                document.getElementById('profile-picture').src=url;
            })
            
        }
    });

</script>

<!-- Bootstrap core JavaScript -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="js/profile.js"></script>
<script src="vendor/jquery/jquery.min.js"></script>
<script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
</html>